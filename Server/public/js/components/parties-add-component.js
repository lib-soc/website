import{S as t,i as e,a as n,b as i,s as o,q as a,n as r,g as s,t as l,o as c,j as m,e as p,c as u,d,u as f,v as g,f as h,l as b,r as w}from"./index-5b685137.js";import{w as y}from"./index-8744cf8a.js";import{getData as v,loadLocaleContent as x,sendData as k}from"../../../../../../../../../js/libraries/serverTools.js";import{addMarkersEntries as j,translate as S}from"../../../../../../../../../js/libraries/mapTools.js";import"../../../../../../../../../js/components/map-component.js";function z(t){let e,n,o,a,r,l,c,m,y,v,x,k,j,L,S,z,T,C,N,O,H,M,A,$,q,E,J,U,D,I,P,R,G,K,Q;return{c(){e=p("div"),n=p("div"),o=p("h1"),o.textContent="Add a Party",a=u(),r=p("img"),c=u(),m=p("p"),m.textContent="If there are no parties in your country which you can join then do the following:",y=u(),v=p("ol"),v.innerHTML="<li>Click on the map to show us where you are located;</li> \n                    <li>Add a way to contact you or leave blank for a pin to point to our discord;</li> \n                    <li>Press &quot;Submit&quot; to add yourself to our map;</li> \n                    <li>Verify yourself by having a chat with us at our Discord server to show on the map;</li>",x=u(),k=p("div"),j=p("label"),j.textContent="Location:",L=u(),S=p("div"),z=p("input"),T=u(),C=p("div"),N=u(),O=p("div"),H=p("label"),H.textContent="Contact:",M=u(),A=p("div"),$=p("input"),q=u(),E=p("div"),J=u(),U=p("button"),U.textContent="Submit",D=u(),I=p("p"),P=u(),R=p("map-component"),d(r,"id","parties-img"),f(r.src,l="/img/common/parties.svg")||d(r,"src","/img/common/parties.svg"),d(r,"alt","parties"),d(m,"class","description"),d(j,"for","address-input"),d(z,"id","address-input"),d(z,"type","text"),z.readOnly=!0,d(C,"class","ghost-input"),d(S,"class","input-wrapper"),d(k,"id","address-input-wrapper"),d(k,"class","input-label-wrapper"),d(H,"for","contact-input"),d($,"id","contact-input"),d($,"type","text"),d(E,"class","ghost-input"),d(A,"class","input-wrapper"),d(O,"class","input-label-wrapper"),d(U,"id","submit-button"),d(I,"id","confirmation-msg"),g(R,"id","map"),g(R,"callback",G=t[15]),d(n,"id","text-container"),d(e,"id","container")},m(s,l){i(s,e,l),h(e,n),h(n,o),h(n,a),h(n,r),h(n,c),h(n,m),h(n,y),h(n,v),h(n,x),h(n,k),h(k,j),h(k,L),h(k,S),h(S,z),t[10](z),h(S,T),h(S,C),h(n,N),h(n,O),h(O,H),h(O,M),h(O,A),h(A,$),t[12]($),h(A,q),h(A,E),h(n,J),h(n,U),h(n,D),h(n,I),t[14](I),h(n,P),h(n,R),K||(Q=[b(z,"input",t[11]),b($,"input",t[13]),b(U,"click",t[9])],K=!0)},p(t,e){16&e&&G!==(G=t[15])&&g(R,"callback",G)},d(n){n&&s(e),t[10](null),t[12](null),t[14](null),K=!1,w(Q)}}}function T(t){let e,n=3==t[3]&&z(t);return{c(){n&&n.c(),e=a()},m(t,o){n&&n.m(t,o),i(t,e,o)},p(t,i){3==t[3]?n?n.p(t,i):(n=z(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&s(e)}}}function C(t){let e,n=t[3],l=T(t);return{c(){l.c(),e=a(),this.c=r},m(t,n){l.m(t,n),i(t,e,n)},p(t,[i]){8&i&&o(n,n=t[3])?(l.d(1),l=T(t),l.c(),l.m(e.parentNode,e)):l.p(t,i)},i:r,o:r,d(t){t&&s(e),l.d(t)}}}function N(t){t.nextElementSibling.innerHTML=t.value}function O(t,e,n){let i,o,a=y(0);l(t,a,(t=>n(3,i=t)));let r,s,p=y({});l(t,p,(t=>n(4,o=t)));let u,d,f,g;v("/assets/parties.json",(t=>{r=JSON.parse(t),s={};for(let t of r){let e=t.country;null==t.contact&&(t.contact="https://discord.gg/Qk8KUk787z"),e in s?s[e].push(t):s[e]=[t]}a.update((t=>t+1))}));let h=0,b=0,w=function(t,e){let n=new L.Icon({iconUrl:"/img/common/markers/marker-black.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});return L.marker([t,e],{icon:n})}(0,0);w.setOpacity(0);let z=x(p,"parties-component",a);function T(t,e,n){let i,o="<b>"+e.Group+"</b><br>";for(let a of["location","members","contact"]){let r=e[a]+": ";if("contact"==a)o+=r+"<a href='"+t.contact+"' target='_blank' rel=noreferrer>"+t.contact+"</a>";else if("location"==a){let a,s=[t.country,t.state,t.town].filter((t=>null!=t&&null!=t));a="en"==n?s.map((t=>t)).join(", "):s.map((t=>S(e,t))).join(", "),o+=r+a+"<br>",i=[t.latitude,t.longitude]}else o+=r+t[a]+"<br>"}return{text:o,coordinates:i}}function C(t,e,i){let o=t([22,0],2);j(r,s,o,e,i,T,"green"),w.addTo(o),o.on("click",(function(t){let e=t.latlng.lat,i=t.latlng.lng;h=e,b=i,function(t,e,n){let i=L.latLng(e,n);t.setLatLng(i)}(w,e,i),w.setOpacity(1),v(`https://nominatim.openstreetmap.org/reverse?lat=${e}&lon=${i}&format=jsonv2`,(t=>{let e=(t=JSON.parse(t)).address,i=e.city||e.town||e.village||e.hamlet,o=e.state,a=e.country;null!=o?a+=", "+o:o="",null!=i?a+=", "+i:i="",n(1,d.value=a,d),N(d)})),function(t,e){v(`https://nominatim.openstreetmap.org/reverse?lat=${t}&lon=${e}&format=jsonv2&accept-language=en`,(t=>{let e=(t=JSON.parse(t)).address,n=e.city||e.town||e.village||e.hamlet,i=e.state,o=e.country;null!=i||(i=""),null!=n||(n=""),g=[o,i,n]}))}(e,i)}))}function O(t){!1!==t?(n(0,u.innerHTML="You have been added to our database! Now go to our Discord to verify yourself.",u),n(0,u.style.color="green",u)):(n(0,u.innerHTML="Something went wrong.",u),n(0,u.style.color="red",u))}x(p,"countries",a),c((()=>{}));return[u,d,f,i,o,a,p,z,C,function(){if(null!=g){let t={country:g[0],state:g[1],town:g[2],latitude:h,longitude:b,contact:f.value};""==t.state&&(t.state=null),""==t.town&&(t.town=null),""==t.contact&&(t.contact=null),k("/"+z+"/parties-add-post/",t,O)}},function(t){m[t?"unshift":"push"]((()=>{d=t,n(1,d)}))},()=>N(d),function(t){m[t?"unshift":"push"]((()=>{f=t,n(2,f)}))},()=>N(f),function(t){m[t?"unshift":"push"]((()=>{u=t,n(0,u)}))},t=>C(t,o,z)]}class H extends t{constructor(t){super(),this.shadowRoot.innerHTML="<style>@import '/css/common.css';#confirmation-msg{margin-top:0.5rem;margin-bottom:2rem}ol li{margin-left:3rem;margin-bottom:0.5rem}label{display:inline-block;font-family:var(--serif,serif);font-size:1.15rem;line-height:160%;color:#222222;width:5.5rem}input,.ghost-input{font-size:1.15rem;font-family:var(--serif,serif)}input{height:2.5rem;display:inline-block;position:relative}#address-input,#contact-input{width:100%}#address-input-wrapper{margin-top:2rem;margin-bottom:1rem}.ghost-input{display:block;visibility:hidden;height:0;padding-left:0.5rem;padding-right:0.5rem}.input-wrapper{display:inline-block;max-width:calc(100% - 5.5rem);min-width:min(20rem, calc(100% - 5.5rem));height:2.5rem}.input-label-wrapper{display:flex;justify-content:start}.input-label-wrapper label{position:relative;top:0.3rem}.description{margin-bottom:1rem}#submit-button{display:block;margin:auto;margin-top:2rem;padding:1rem 2rem;font-size:1.4rem;font-family:var(--sans-serif,sans-serif);border:0rem solid black;border-radius:0.5rem;background:#cb1816;color:white}#parties-img{position:absolute;width:14rem;left:50%;transform:translate(-50%);z-index:0;opacity:0.2}#text-container>:nth-child(3){margin-top:8rem}#map{--height:30rem;--width:100%;--margin-top:2rem;--margin-bottom:0.5rem}#text-container{position:relative;max-width:calc(100vw - 4rem);margin:auto}h1{margin-bottom:1rem;font-size:2.2rem;text-align:center}#container{margin:auto;max-width:800px;margin-top:1rem;margin-bottom:4rem}#container p{text-align:justify}</style>",e(this,{target:this.shadowRoot,props:n(this.attributes),customElement:!0},O,C,o,{},null),t&&t.target&&i(t.target,this,t.anchor)}}customElements.define("parties-add-component",H);export{H as default};
